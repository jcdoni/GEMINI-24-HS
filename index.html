<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GEMINI GLOBAL HUB | V14.2 RESGATE</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        :root { --primary: #00ff88; --bg: #000; --surface: #111; --text: #fff; }
        * { box-sizing: border-box; }
        body { margin: 0; background: var(--bg); color: var(--text); font-family: sans-serif; display: flex; height: 100vh; width: 100vw; overflow: hidden; }

        /* SIDEBAR ROBUSTA */
        .sidebar { width: 60px; background: #080808; border-right: 1px solid #222; display: flex; flex-direction: column; align-items: center; padding: 20px 0; z-index: 100; flex-shrink: 0; }
        .nav-item { width: 100%; height: 50px; display: flex; align-items: center; justify-content: center; cursor: pointer; color: #666; font-size: 20px; transition: 0.3s; }
        .nav-item.active { color: var(--primary); border-left: 3px solid var(--primary); background: rgba(0,255,136,0.05); }

        /* √ÅREA PRINCIPAL */
        .main { flex: 1; display: flex; flex-direction: column; background: radial-gradient(circle at top right, #0d1a14 0%, #000 80%); overflow-y: auto; }
        
        .header { padding: 20px; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.8); }
        .btn-config { background: var(--primary); color: #000; border: none; padding: 10px 15px; border-radius: 20px; font-weight: bold; cursor: pointer; font-size: 12px; }

        .hero { padding: 40px 20px; text-align: left; }
        .hero h1 { font-size: 2.5rem; margin: 0; color: var(--primary); }
        .hero p { color: #888; margin: 5px 0; font-size: 14px; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; padding: 20px; }
        .card { background: var(--surface); border-radius: 10px; overflow: hidden; border: 1px solid #222; position: relative; }
        .card img { width: 100%; aspect-ratio: 16/9; object-fit: cover; }
        .card-name { padding: 10px; font-size: 10px; text-align: center; font-weight: bold; }
        .badge { position: absolute; top: 5px; left: 5px; background: var(--primary); color: #000; font-size: 8px; padding: 2px 5px; border-radius: 3px; font-weight: 900; }

        /* MODAIS */
        #modal { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 2000; display: none; align-items: center; justify-content: center; padding: 20px; }
        .box { background: #111; padding: 30px; border-radius: 20px; width: 100%; max-width: 350px; border: 1px solid var(--primary); }
        input { width: 100%; padding: 12px; margin: 10px 0; background: #000; border: 1px solid #333; color: #fff; border-radius: 10px; }
        .btn-go { width: 100%; padding: 15px; background: var(--primary); border: none; font-weight: bold; border-radius: 10px; cursor: pointer; }

        #player { position: fixed; inset: 0; background: #000; z-index: 3000; display: none; }
        .back { position: absolute; top: 20px; left: 20px; background: var(--primary); padding: 10px; border-radius: 5px; font-weight: bold; border: none; }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="nav-item active">üè†</div>
        <div class="nav-item">üì∫</div>
        <div class="nav-item">üé¨</div>
        <div class="nav-item" onclick="location.reload()">üîÑ</div>
    </div>

    <div class="main">
        <div class="header">
            <div style="font-weight: 900; color: var(--primary);">GEMINI GLOBAL</div>
            <button class="btn-config" onclick="showModal()">CONECTAR</button>
        </div>

        <div class="hero">
            <h1 id="title">GEMINI HUB</h1>
            <p id="desc">Sua central de m√≠dia est√° pronta. Clique em CONECTAR para inserir sua lista M3U.</p>
        </div>

        <div class="grid" id="g"></div>
    </div>

    <div id="modal">
        <div class="box">
            <h2 style="color:var(--primary); margin:0;">FONTE M3U</h2>
            <input type="text" id="u" placeholder="Cole seu link aqui...">
            <button class="btn-go" onclick="load()">SINCRONIZAR</button>
            <button class="btn-go" style="background:#222; color:#fff; margin-top:10px;" onclick="hideModal()">VOLTAR</button>
        </div>
    </div>

    <div id="player">
        <button class="back" onclick="stop()">‚Üê VOLTAR</button>
        <video id="v" controls autoplay style="width: 100%; height: 100%;"></video>
    </div>

    <script>
        const P = "https://api.allorigins.win/raw?url=";
        let DATA = [];

        window.onload = () => {
            const s = localStorage.getItem('g_v14');
            if(s) { DATA = JSON.parse(s); render(); }
        };

        function showModal() { document.getElementById('modal').style.display = 'flex'; }
        function hideModal() { document.getElementById('modal').style.display = 'none'; }

        async function load() {
            const url = document.getElementById('u').value;
            if(!url) return;
            document.getElementById('title').innerText = "CARREGANDO...";
            try {
                const r = await fetch(P + encodeURIComponent(url));
                const t = await r.text();
                parse(t);
                hideModal();
            } catch(e) { alert("Erro de conex√£o."); document.getElementById('title').innerText = "GEMINI HUB"; }
        }

        function parse(t) {
            const l = t.split('\n'); DATA = [];
            for(let i=0; i<l.length; i++) {
                if(l[i].includes("#EXTINF")) {
                    let n = l[i].split(',')[1] || "Canal";
                    let b = l[i].includes("BR:") ? "BR" : (l[i].includes("4K") ? "4K" : "");
                    n = n.replace("BR:", "").replace("4K", "").trim();
                    const logo = l[i].match(/tvg-logo="([^"]+)"/)?.[1] || "";
                    const url = l[i+1]?.trim();
                    if(url) DATA.push({ n, logo, url, b });
                }
            }
            localStorage.setItem('g_v14', JSON.stringify(DATA));
            render();
        }

        function render() {
            const g = document.getElementById('g');
            g.innerHTML = DATA.slice(0, 100).map(s => `
                <div class="card" onclick="play('${s.url}')">
                    ${s.b ? `<div class="badge">${s.b}</div>` : ''}
                    <img src="${s.logo}" onerror="this.src='https://via.placeholder.com/300x168/111/00ff88?text=TV'">
                    <div class="card-name">${s.n}</div>
                </div>
            `).join('');
            document.getElementById('title').innerText = "SISTEMA ATIVO";
            document.getElementById('desc').innerText = DATA.length + " itens sincronizados.";
        }

        function play(u) {
            const v = document.getElementById('v');
            document.getElementById('player').style.display = 'block';
            if(Hls.isSupported()) { const h = new Hls(); h.loadSource(u); h.attachMedia(v); }
            else { v.src = u; }
        }

        function stop() { document.getElementById('v').pause(); document.getElementById('player').style.display = 'none'; }
    </script>
</body>
</html>
 
